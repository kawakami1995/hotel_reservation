<header>
  <headerContain>
      <a href="/" class="header_logo_area"><img src="https://rails-02-sample.herokuapp.com/assets/common/logo.png" alt="ヘッダーロゴ" class="header_image"> </a>
      <div class="headerButtons">
          <% if user_signed_in? %>
              <% if @user.user_image.blank? %>
                  <%= image_tag "default_user.png", class: "top_user_image" %>
              <% else %>
                  <img src=<%= @user.user_image %>class="top_user_image"><br>   
              <% end %>                                 
              <div class="headerButton account_setting">
                  <div class="dropdown_btn">
                      <div id="user_name">
                          <p class=""><%= @user.user_name %></p>
                          <p class="triangle">▼</p>     
                      </div>             
                  </div>   
                  <ul id="dropdown_list">
                      <li class="dropdown_item"><a href="/rooms/new">施設の新規登録</a></li>
                      <li class="dropdown_item"><a href="/reservations/index">予約済み一覧</a></li>
                      <li class="dropdown_item"><a href="/rooms/index">登録済み一覧</a></li>
                      <li class="dropdown_item"><a href="/users/account">アカウント設定</a></li>
                      <li class="dropdown_item"><a href="/users/sign_out">ログアウト</a></li>
                  </ul>
              </div>              
          <% else %>
              <div class="headerButton login">
                  <%= link_to "ログイン","/users/sign_in" %>
              </div>
              <div class="headerButton newAccount">
                  <%= link_to "新規登録","/users/sign_up" %>
              </div>       
          <% end %>       
      </div>
  </headerContain>
</header>
<h3>再予約確認画面</h3>
<%= form_with  model: @reservation ,url: "/reservations/#{@reservation.id}/update", html: {multipart: true} ,method: :patch,local: true do |f| %> 
  <thead>
    <tr>
      <th>チェックイン</th>
        <td><%= @reservation.check_in_date.strftime("%Y/%m/%d") %></td><br>
        <%= f.hidden_field :check_in_date, value: @reservation.check_in_date %>
      <th>チェックアウト</th>
        <td><%= @reservation.check_out_date.strftime("%Y/%m/%d") %></td><br>
        <%= f.hidden_field :check_out_date, value: @reservation.check_out_date %>
      <th>宿泊日数</th>
        <td><%="#{@reservation.stay_days}日" %></td><br>
        <%= f.hidden_field :stay_days, value: @reservation.stay_days %>
      <th>宿泊人数</th>
        <td><%= "#{@reservation.number_of_people}人" %></td><br>
        <%= f.hidden_field :number_of_people, value: @reservation.number_of_people %>
      <th>お支払い金額</th>
        <td><%= "#{@reservation.payment_amount.to_s(:delimited, delimiter: ',')}円" %></td><br>
        <%= f.hidden_field :payment_amount, value: @reservation.payment_amount %>
      <div class="field">
        <%= f.hidden_field :user_id,value: @reservation.user_id %>        
        <%= f.hidden_field :room_id,value: @reservation.room_id %>
        <%= f.hidden_field :room_name,value: @reservation.room_name %>
        <%= f.hidden_field :room_introduction,value: @reservation.room_introduction %>
        <%= f.hidden_field :price,value: @reservation.price %>        
        <%= f.hidden_field :address,value: @reservation.address %>
        <%= f.hidden_field :room_image,value: @reservation.room_image %>
      </div> 
      <div class="field">
        <%= f.submit "再予約を確定する", class: "confirm_submit"%>
      </div>  
    </tr>
  </thead>
<% end %>
<!-- Javascriptの外部ファイルが読み込めなかったため、やむを得ず直接記載しています。 -->
<script type="text/javascript">
  document.getElementById("dropdown_list").style.visibility = "hidden"
  document.addEventListener("click", (e) => {        
      if(!e.target.closest("#user_name")) {
          document.getElementById("dropdown_list").style.visibility = "hidden"
      } else {
          document.getElementById("dropdown_list").style.visibility = "visible"
      }
    })
</script>